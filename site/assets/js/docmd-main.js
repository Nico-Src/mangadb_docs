function initializeCollapsibleNav(){const t=document.querySelector(".sidebar-nav");t&&t.querySelectorAll("li.collapsible").forEach(o=>{const e=o.querySelector("a"),n=o.querySelector(".submenu");!e||!n||e.addEventListener("click",i=>{const c=e.getAttribute("href");if(!c||c==="#"||i.target.closest(".collapse-icon")){i.preventDefault();const l=!(o.getAttribute("aria-expanded")==="true");o.setAttribute("aria-expanded",l),n.style.display=l?"block":"none"}})})}function initializeMobileMenus(){const t=document.querySelector(".sidebar-menu-button"),o=document.querySelector(".sidebar");t&&o&&t.addEventListener("click",s=>{s.stopPropagation(),o.classList.toggle("mobile-expanded")});const e=document.querySelector(".toc-menu-button"),n=document.querySelector(".toc-container"),i=document.querySelector(".toc-title"),c=s=>{window.getComputedStyle(e).display!=="none"&&(s.stopPropagation(),n.classList.toggle("mobile-expanded"))};e&&n&&(e.addEventListener("click",c),i&&i.addEventListener("click",c))}function initializeSidebarScroll(){const t=document.querySelector(".sidebar");t&&requestAnimationFrame(()=>{const o=t.querySelector("a.active");o&&o.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})})}function setupThemeToggleListener(){const t=document.getElementById("theme-toggle-button");function o(e){document.documentElement.setAttribute("data-theme",e),document.body.setAttribute("data-theme",e),localStorage.setItem("docmd-theme",e);const n=document.getElementById("highlight-theme");if(n){const i=n.getAttribute("data-base-href")+`docmd-highlight-${e}.css`;n.setAttribute("href",i)}}t&&t.addEventListener("click",()=>{const n=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";o(n)})}function initializeSidebarToggle(){const t=document.getElementById("sidebar-toggle-button"),o=document.body;if(!o.classList.contains("sidebar-collapsible")||!t)return;const e=o.dataset.defaultCollapsed==="true";let n=localStorage.getItem("docmd-sidebar-collapsed");n===null?n=e:n=n==="true",n&&o.classList.add("sidebar-collapsed"),t.addEventListener("click",()=>{o.classList.toggle("sidebar-collapsed");const i=o.classList.contains("sidebar-collapsed");localStorage.setItem("docmd-sidebar-collapsed",i)})}function initializeTabs(){document.querySelectorAll(".docmd-tabs").forEach(t=>{const o=t.querySelectorAll(".docmd-tabs-nav-item"),e=t.querySelectorAll(".docmd-tab-pane");o.forEach((n,i)=>{n.addEventListener("click",()=>{o.forEach(c=>c.classList.remove("active")),e.forEach(c=>c.classList.remove("active")),n.classList.add("active"),e[i]&&e[i].classList.add("active")})})})}function initializeCopyCodeButtons(){if(document.body.dataset.copyCodeEnabled!=="true")return;const t='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"></polyline></svg>';document.querySelectorAll("pre").forEach(e=>{const n=e.querySelector("code");if(!n)return;const i=document.createElement("div");i.style.position="relative",i.style.display="block",e.parentNode.insertBefore(i,e),i.appendChild(e),e.style.position="static";const c=document.createElement("button");c.className="copy-code-button",c.innerHTML=t,c.setAttribute("aria-label","Copy code to clipboard"),i.appendChild(c),c.addEventListener("click",()=>{navigator.clipboard.writeText(n.innerText).then(()=>{c.innerHTML=o,c.classList.add("copied"),setTimeout(()=>{c.innerHTML=t,c.classList.remove("copied")},2e3)}).catch(s=>{console.error("Failed to copy text: ",s),c.innerText="Error"})})})}function syncBodyTheme(){const t=document.documentElement.getAttribute("data-theme");t&&document.body&&document.body.setAttribute("data-theme",t)}document.addEventListener("DOMContentLoaded",()=>{syncBodyTheme(),setupThemeToggleListener(),initializeSidebarToggle(),initializeTabs(),initializeCopyCodeButtons(),initializeCollapsibleNav(),initializeMobileMenus(),initializeSidebarScroll()});
